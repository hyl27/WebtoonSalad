<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.webtoonsalad.mapper.JJimMapper">

  <select id="selectJJimByUserId" parameterType="String" resultType="com.webtoonsalad.dto.WebtoonDTO">
	SELECT w.title, w.thumbnail1, w.thumbnail2
	FROM tbl_jjim j
	JOIN tbl_webtoon w ON j.tbl_webtoon_id = w.id
	WHERE j.tbl_user_id = #{id}
	ORDER BY 
	    CASE 
	        WHEN w.LastUp > j.LastView THEN 0 
	        ELSE 1 
	    END,
	   	w.LastUp DESC
  </select>
</mapper>